<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>PHANTOM ARCHIVES</title>
  <style>
    /* space grotesk font */
    @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500&display=swap');

    /* bd-geminis font [Digital Riptide?]*/
    @import url("https://use.typekit.net/hkv0hsz.css");

    /* GeneraleStation font [Octagon of Dex] */
    @font-face {
      font-family: GeneraleStation;
      src: url("../static/fonts/GeneraleStation-SemiExtended.otf") format("opentype");
    }

    /* pixtur font [Neon Babylon]*/
    @font-face {
      font-family: Pixtur;
      src: url("../static/fonts/Pixtur.otf") format("opentype");
    }

    /* betatron font [Electric Snow Dream]*/
    @font-face {
      font-family: Betatron-Regular;
      src: url("../static/fonts/Betatron-Regular.otf") format("opentype");
    }

    @font-face {
      font-family: Reg Times;
      src: url("../static/fonts/RegTimes.otf") format("opentype");
    }

    html {
      padding: 0;
      margin: 0;
    }

    body {
      background-color: rgb(0, 0, 0);
      height: 100%;
      overflow-x: hidden;
      overflow-y: hidden;
      margin: 0;
      padding: 0;
      background-image: url("../static/images/pa-index-floor.png");
      background-size: cover;
    }

    h1 {
      color: white;
    }

    img {
      max-width: 170px;
      position: absolute;
    }

    .nav {
      display: flex;
      justify-content: space-around;
      position: absolute;
      width: 100%;
      bottom: 0;
    }

    .nav img {
      position: initial;
      width: 60px;
      filter: brightness(0) saturate(100%) invert(28%) sepia(12%) saturate(7499%) hue-rotate(312deg) brightness(94%) contrast(86%);
    }

    .nav img:hover {
      filter: brightness(0) saturate(100%) invert(28%) sepia(12%) saturate(7499%) hue-rotate(312deg) brightness(94%) contrast(86%) drop-shadow(4px 4px 0px #061379);
    }

    #left-arrow {
      left: 20vw;
      font-size: 5vw;
      margin-right: 3vw;
    }

    .left-arrow:hover {
      cursor: pointer;
    }

    .right-arrow:hover {
      cursor: pointer;
    }

    #right-arrow {
      left: 60vw;
      font-size: 5vw;
      margin-left: 3vw;
    }

    #title-button {
      width: 50vw;
      text-align: center;
      font-family: Pixtur;
      font-size: 4rem;
      padding: 1rem;
      margin-bottom: 2rem;
      border-radius: 1rem;
      color: #AE3757;
      background-color: #061379;
      border: 5px solid #AE3757;
      text-decoration: none;
    }

    #title-button:hover {
      cursor: pointer;
      color: #061379;
      background-color: #AE3757;
      border: 5px solid #061379;
    }

    .right-arrow {
      transform: scaleX(-1);
    }

    .back-button {
      cursor: pointer;
      color: rgb(2, 255, 32);
      position: absolute;
      top: 12px;
      left: 12px;
      border: 1px solid rgb(2, 255, 32);
      padding: 3px 5px;
      font-family: Pixtur;
      font-size: 2rem;
    }

    .back-button:hover {
      box-shadow: 4px 4px #061379;
    }


    .nb:hover,
    .od:hover,
    .dr:hover,
    .esd:hover {
      transform: scale(1.1);
    }

    .logos img {
      transition: all .3s ease-in-out;
    }
  </style>
</head>

<body>
  <a href="../zones-index.html">
    <span class="back-button">leave</span>
  </a>

  <div class="chessboard-container">

  </div>

  <!-- <div class="origin"></div>  -->
  <div class="logos">
    <a href="../neon-babylon/"><img src="../static/images/nb-icon.png" class="nb" /></a>
    <a href="../octagon-of-dex/"><img src="../static/images/ood-icon.png" class="od" /></a>
    <a href="../digital-riptide/"><img src="../static/images/dr-icon.png" class="dr" /></a>
    <a href="../electric-snow-dream/"><img src="../static/images/esd-icon.png" class="esd" /></a>
    <!-- <a href="../tetra-denim/"><img src="../static/images/td-icon.png" class="td" /></a>
    <a href="../hurricane-weather-report/"><img src="../static/images/cd-brain-icon.png" class="hwr" /></a> -->
  </div>

  <div class="nav">
    <img class="left-arrow" src="./pa-images/arrow-pink.svg" alt="">
    <a href="../neon-babylon/" id="title-button">Neon Babylon</a>
    <img class="right-arrow" src="./pa-images/arrow-pink.svg" alt="">
  </div>
  <audio
    src="https://prismic-io.s3.amazonaws.com/eternal-september/6b2da599-e3d9-4504-b0b0-299eceb63e56_Phantom+Archive+Index+Theme.mp3"
    autoplay loop></audio>

  <script type="text/javascript">

    //if you want to add a new icon, create a new instance of this Contag class and add it to the contags list
    class Contag {
      constructor(object, name, font, position, href) {
        this.object = object
        this.name = name
        this.font = font
        this.position = position
        this.href = href
      }
    }

    //current icons
    let neon = new Contag(document.querySelector(".nb"), "Neon Babylon", "Pixtur", { top: 80, left: 43 }, '../neon-babylon')
    let octagon = new Contag(document.querySelector(".od"), "Octagon of Dex", "GeneraleStation", { top: 30, left: 15 }, '../octagon-of-dex')
    let riptide = new Contag(document.querySelector(".dr"), "Digital Riptide", "bd-geminis", { top: 5, left: 43 }, '../digital-riptide')
    let snowDream = new Contag(document.querySelector(".esd"), "The Electric Snow Dream", "Betatron-Regular", { top: 30, left: 77 }, '../electric-snow-dream')
    // let tetraDenim = new Contag(document.querySelector(".td"), "Tetra Denim", "Reg Times", { top: 30, left: 77 })
    // let hurricaneWeatherReport = new Contag(document.querySelector(".hwr"), "Hurricane Weather Report", "Monospace", { top: 40, left: 77 })

    //back button
    let backButton = document.querySelector(".back-button")

    //contags list
    // const contags = [neon, octagon, riptide, snowDream, tetraDenim, hurricaneWeatherReport]
    const contags = [neon, octagon, riptide, snowDream]
    let size = contags.length

    //variable used to change positioning of icons and contents of the chessButton
    let offset = 0

    //displays title of "active" icon [the one on the bottom]
    const chessButton = document.getElementById('title-button')
    const changeChessButton = () => {
      chessButton.innerHTML = `${contags[offset % size].name}`
      chessButton.style.fontFamily = `${contags[offset % size].font}`
      chessButton.href = contags[offset % size].href
      backButton.style.fontFamily = `${contags[offset % size].font}`
      chessButton.style.fontSize = offset % size == 1 ? "3.5rem" : "4rem"
      // if we want the "bottom" contag to have unique css:
      // contags.forEach((e) => {
      //   e.object.style.filter = "grayscale(50%) blur(2px)";
      // })
      // contags[offset % size].object.style.filter = "grayscale(0%) blur(0)"
    }

    //variables and functions used for setting icon positions
    const widthRadius = 22
    const heightRadius = 21
    const angle = (2 * Math.PI) / size
    const aspectRatio = window.screen.availWidth / window.screen.availHeight
    const angleOffset = Math.PI / 50
    const findPos = (index) => {
      let x = widthRadius * Math.cos((angle * (index - 1)) + angleOffset)
      let y = heightRadius * Math.sin((angle * (index - 1)))
      return { top: 36 - y, left: (x + 46 - widthRadius) * aspectRatio } //the 36 and 46 should be placed into variables instead of hardcoded
    }

    const setPositions = () => {
      for (i = 0; i < size; i++) {
        contags[i].position = findPos(i - offset)
        contags[i].object.style.top = `${contags[i].position.top}vh`
        contags[i].object.style.left = `${contags[i].position.left}vw`
      }
    }

    const rotateCW = () => {
      offset++
      setPositions()
      changeChessButton()
    }

    const rotateCCW = () => {
      offset--
      offset = offset < 0 ? size - 1 : offset;
      setPositions()
      changeChessButton()
    }

    setPositions() //sets initial positions of icons on page
    document.querySelector(".right-arrow").addEventListener("click", rotateCW);
    document.querySelector(".left-arrow").addEventListener("click", rotateCCW);
  </script>
</body>

</html>