<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>PHANTOM ARCHIVES</title>
  <style>
    /* space grotesk font */
    @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500&display=swap');

    /* bd-geminis font [Digital Riptide?]*/
    @import url("https://use.typekit.net/hkv0hsz.css");

    /* GeneraleStation font [Octagon of Dex] */
    @font-face {
      font-family: GeneraleStation;
      src: url("../static/fonts/GeneraleStation-SemiExtended.otf") format("opentype");
    }

    /* pixtur font [Neon Babylon]*/
    @font-face {
      font-family: Pixtur;
      src: url("../static/fonts/pixtur.otf") format("opentype");
    }

    /* betatron font [Electric Snow Dream]*/
    @font-face {
      font-family: Betatron-Regular;
      src: url("../static/fonts/Betatron-Regular.otf") format("opentype");
    }

    @font-face {
      font-family: Reg Times;
      src: url("../static/fonts/RegTimes.otf") format("opentype");
    }

    html {
      padding: 0;
      margin: 0;
    }

    body {
      background-color: rgb(0, 0, 0);
      height: 100%;
      overflow-x: hidden;
      overflow-y: hidden;
      margin: 0;
      padding: 0;
      background-image: url("../static/images/pa-index-floor.png");
      background-size: cover;
    }

    h1 {
      color: white;
    }

    img {
      max-width: 170px;
      position: absolute;
    }

    .nav {
      display: flex;
      justify-content: space-around;
      position: absolute;
      width: 100%;
      bottom: 0;
    }

    .nav img {
      position: initial;
      width: 60px;
    }

    .arrows {
      background-color: #00000000;
      color: white;
      cursor: pointer;
    }

    #left-arrow {
      left: 20vw;
      font-size: 5vw;
      margin-right: 3vw;
    }

    .left-arrow:hover {
      cursor: pointer;
    }

    .right-arrow:hover {
      cursor: pointer;
    }

    #right-arrow {
      left: 60vw;
      font-size: 5vw;
      margin-left: 3vw;
    }

    #chess-button {
      width: 50vw;
      text-align: center;
      font-family: Pixtur;
      font-size: 4rem;
      padding: 1rem;
      margin-bottom: 2rem;
      color: #E6618A;
      background-color: #071279;
      border: 5px solid #E6618A;
      border-radius: 1rem;
    }

    #chess-button:hover {
      cursor: pointer;
    }

    .right-arrow {
      transform: scaleX(-1);
    }
  </style>
</head>

<body>
  <!-- <div class="origin"></div>  -->
  <div class="chess">
    <a href="../neon-babylon/"><img src="../static/images/nb-icon.png" class="nb" /></a>
    <a href="../octagon-of-dex/"><img src="../static/images/ood-icon.png" class="od" /></a>
    <a href="../digital-riptide/"><img src="../static/images/dr-icon.png" class="dr" /></a>
    <a href="../electric-snow-dream/"><img src="../static/images/esd-icon.png" class="esd" /></a>
    <!-- <a href="../tetra-denim/"><img src="../static/images/td-icon.png" class="td" /></a>
    <a href="../hurricane-weather-report/"><img src="../static/images/cd-brain-icon.png" class="hwr" /></a> -->
  </div>

  <div class="nav">
    <img class="left-arrow" src="./pa-images/arrow-pink.svg" alt="">
    <span id="chess-button">Neon Babylon</span>
    <img class="right-arrow" src="./pa-images/arrow-pink.svg" alt="">
  </div>

  <script type="text/javascript">

    //if you want to add a new icon, create a new instance of this Contag class and add it to the contags list
    class Contag {
      constructor(object, name, font, position) {
        this.object = object
        this.name = name
        this.font = font
        this.position = position
      }
    }

    //current icons
    let neon = new Contag(document.querySelector(".nb"), "Neon Babylon", "Pixtur", { top: 80, left: 43 })
    let octagon = new Contag(document.querySelector(".od"), "Octagon of Dex", "GeneraleStation", { top: 30, left: 15 })
    let riptide = new Contag(document.querySelector(".dr"), "Digital Riptide", "bd-geminis", { top: 5, left: 43 })
    let snowDream = new Contag(document.querySelector(".esd"), "The Electric Snow Dream", "Betatron-Regular", { top: 30, left: 77 })
    // let tetraDenim = new Contag(document.querySelector(".td"), "Tetra Denim", "Reg Times", { top: 30, left: 77 })
    // let hurricaneWeatherReport = new Contag(document.querySelector(".hwr"), "Hurricane Weather Report", "Monospace", { top: 40, left: 77 })

    //contags list
    // const contags = [neon, octagon, riptide, snowDream, tetraDenim, hurricaneWeatherReport]
    const contags = [neon, octagon, riptide, snowDream]
    let size = contags.length

    //variable used to change positioning of icons and contents of the chessButton
    let offset = 0

    //displays title of "active" icon [the one on the bottom]
    const chessButton = document.getElementById('chess-button')
    const changeChessButton = () => {
      chessButton.innerHTML = `${contags[offset % size].name}`
      chessButton.style.fontFamily = `${contags[offset % size].font}`
      chessButton.style.fontSize = offset % size == 1 ? "3.5rem" : "4rem"
    }

    //variables and functions used for setting icon positions
    const widthRadius = 22
    const heightRadius = 25
    const angle = (2 * Math.PI) / size
    const aspectRatio = window.screen.availWidth / window.screen.availHeight
    const angleOffset = Math.PI / 50
    const findPos = (index) => {
      let x = widthRadius * Math.cos((angle * (index - 1)) + angleOffset)
      let y = heightRadius * Math.sin((angle * (index - 1)))
      return { top: 36 - y, left: (x + 46 - widthRadius) * aspectRatio } //the 36 and 46 should be placed into variables instead of hardcoded
    }

    const setPositions = () => {
      for (i = 0; i < size; i++) {
        contags[i].position = findPos(i - offset)
        contags[i].object.style.top = `${contags[i].position.top}vh`
        contags[i].object.style.left = `${contags[i].position.left}vw`
      }
    }

    const rotateCW = () => {
      offset++
      setPositions()
      changeChessButton()
    }

    const rotateCCW = () => {
      offset--
      offset = offset < 0 ? size - 1 : offset;
      console.log(offset)
      setPositions()
      changeChessButton()
    }

    setPositions() //sets initial positions of icons on page
    document.querySelector(".right-arrow").addEventListener("click", rotateCW);
    document.querySelector(".left-arrow").addEventListener("click", rotateCCW);
  </script>
</body>

</html>